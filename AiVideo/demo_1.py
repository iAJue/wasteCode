
import subprocess

segments = [
    {
        'title': '桥段一：绪花的家庭混乱和夜逃计划',
        'description': "这集一上来就给我们来了个大戏！我们的女主角绪花还没来得及吃上早点，就得应对一场家庭大战。她的妈妈突然宣布要夜逃，因为欠了一屁股债！我怀疑这剧本是不是从家庭伦理剧改过来的。紧接着，绪花就得跟妈妈一起策划一场秘密大逃亡——北边还是南边呢？其实她更想要个暖和的连衣裙吧！要我说，这么刺激的生活，估计谁都吃不下玉米粒了！",
        'times': [
            ('0:19.06', '0:41.21'),
            ('0:43.81', '2:06.13')
        ]
    },
    {
        'title': '桥段二：阿孝的告白与绪花的迷茫',
        'description': "就在绪花还在为夜逃的事情烦恼时，阿孝突然跳出来，说要往玉米罐里灌水，这逻辑清奇啊！不过真正让人震惊的是阿孝的告白，他直截了当地说他喜欢绪花！等一下，这种突然的直球告白是什么操作？这可把绪花整得一愣一愣的，完全不明白‘喜欢’是啥意思。谁能告诉她，这个‘喜欢’到底是吃的还是喝的？",
        'times': [
            ('5:46.00', '7:19.22')
        ]
    },
    {
        'title': '桥段三：从城市到乡村，新的生活开始',
        'description': "话说回来，绪花这次真的要跟妈妈分开，独自去到一个陌生的小镇生活。一路上，心情就像过山车一样，刚刚从隧道里出来就看到海，这心跳加速的感觉真是绝了！等她到了目的地，这旅馆看起来还挺不错，但她没想到的是，迎接她的是外婆的一盆冷水：‘你从今天开始就是这里的佣工！’不带这么玩的吧，外婆！剧情一下子从家庭剧变成了打工人励志剧！",
        'times': [
            ('8:17.29', '9:50.00'),
            ('9:50.00', '11:01.61')
        ]
    },
    {
        'title': '桥段四：初次见面，傲娇的宿舍生活',
        'description': "绪花刚安顿下来，就开始了她的全新‘宿舍’生活。不过这宿舍可不简单，住着一群性格各异的小姐姐们。特别是民子，这妹子第一句话就叫绪花‘去死’！有没有这么直白的？其实人家民子不过是对她种的小根蒜太过执着，搞得绪花一脸懵。接下来，这里不仅是工作，还要面对各种‘职场潜规则’，这让我们的小绪花可有得受了。",
        'times': [
            ('11:17.08', '12:13.00'),
            ('12:13.00', '14:49.29')
        ]
    },
    {
        'title': '桥段五：初次工作，惨遭挫折',
        'description': "刚上班的绪花满怀激情，结果却是忙中出错，把被褥晒在了客人经过的地方，还不小心砸到了人。结果就是被外婆狠狠批评了一顿。看着民子替自己挨训，绪花心里那叫一个愧疚啊。于是她很爷们地说：‘也打我吧！’这情节突然变得有点热血中二起来了呢！不过在这个严格的旅馆里，大家都是一条心，要不然还真没法待下去呢。",
        'times': [
            ('15:02.51', '17:30.00'),
            ('17:30.00', '19:16.62')
        ]
    },
    {
        'title': '桥段六：结尾的疑问与不甘心',
        'description': "在一连串的挫折之后，绪花有点不甘心了。她虽然一开始并不是来这里工作的，但现在却陷入了工作中无法自拔。这就是青春啊，既有迷茫又有奋斗。最后，她还是决定在这个陌生的小镇上继续努力，向着自己的新生活进发！那么接下来，她会遇到什么样的挑战呢？请大家继续关注后续的精彩内容吧！",
        'times': [
            ('22:07.67', '24:11.43')
        ]
    }
]


# 定义输入和输出视频路径
input_video = 'path_to_your_video_file.mp4'
output_video = 'output_temp/output_segment_{}.mp4'


# FFmpeg 命令调用函数
def run_ffmpeg_command(command):
    try:
        subprocess.run(command, check=True)
    except subprocess.CalledProcessError as e:
        print(f"Error occurred: {e}")

# 开始进行视频剪辑
for i, segment in enumerate(segments):
    for j, (start_time, end_time) in enumerate(segment['times']):
        output_file = output_video.format(f"{i+1}_{j+1}")
        command = [
            'ffmpeg',
            '-i', input_video,  # 输入视频
            '-ss', start_time,  # 开始时间
            '-to', end_time,  # 结束时间
            '-c', 'copy',  # 复制视频流，不重新编码
            '-an',  # 去掉音频
            output_file  # 输出文件名
        ]
        run_ffmpeg_command(command)
        print(f"Segment {i+1}, Part {j+1} processed: {output_file}")